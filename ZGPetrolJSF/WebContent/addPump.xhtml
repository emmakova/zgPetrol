<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
    xmlns:pm="http://primefaces.org/mobile">
    
    <f:view renderKitId="PRIMEFACES_MOBILE" />
    
    <h:head>
    	<f:facet name="first">
	        <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
	        <link type="text/css" rel="stylesheet" href="css/main.css" />
	        
	        <title>PrimeFaces</title>
         </f:facet>
    </h:head>
    
    <h:body>
        <h:form>
		
		<p:growl id="growl" sticky="true" />
		
        <pm:page id="first">
            <pm:header title="Dodaj Pumpu" fixed="true">
            	<p:commandButton id="btn-meni" value="Izbornik" type="button" styleClass="ui-btn-left ui-btn-inline" icon="ui-icon-bullets" />
                <p:commandButton id="btn-basic" type="button" styleClass="ui-btn-right ui-btn-inline" icon="ui-icon-plus" />
            </pm:header>
            
            <pm:content>
	            <div class="main">
	            	            	
	            		<pm:field>
						    <p:outputLabel for="country" value="Odaberite DrÅ¾avu" />
						    <p:selectOneMenu id="country" value="#{addPumpControler.country}" required="true">
						     	<p:ajax listener="#{addPumpControler.onCountryChange}" render="city" update="@all"/>
						    	<f:selectItem itemLabel="Select Country" itemValue="" noSelectionOption="true" />
						        <f:selectItems value="#{addPumpControler.countries}" var="c" itemLabel="#{c.name}" itemValue="#{c}"/>
						    </p:selectOneMenu>
						</pm:field>
						<pm:field>
						    <p:outputLabel for="city" value="Izaberite Grad" />
						    <p:selectOneMenu id="city" value="#{addPumpControler.city}" required="true">
						        <f:selectItem itemLabel="Select City" itemValue="" noSelectionOption="true" />
						        <f:selectItems value="#{addPumpControler.cities}" var="c" itemLabel="#{c.name}" itemValue="#{c}"/>
						    </p:selectOneMenu>
						</pm:field>
                    	<pm:field>
						    <p:outputLabel for="company" value="Izaberite Kompaniju"/>
						    <p:selectOneMenu id="company"  value="#{addPumpControler.company}"  required="true">
						        <f:selectItem itemLabel="Select Company" itemValue="" noSelectionOption="true" />
						        <f:selectItems value="#{addPumpControler.companies}" var="c" itemLabel="#{c.name}" itemValue="#{c}"/>
						    </p:selectOneMenu>
						</pm:field>
						
						 <pm:field>
                            <p:outputLabel for="address" value="Adresa Pumpe" />
                            <p:inputText id="address" value="#{addPumpControler.address}" required="true"/>
                        </pm:field>
                        <pm:field>
                            <p:outputLabel for="pumpName" value="Ime Pumpe" />
                            <p:inputText id="pumpName" value="#{addPumpControler.name}"  required="true"/>
                        </pm:field>
 						<pm:field>
                            <p:outputLabel for="latitude" value="Latitude" />
                            <p:inputText id="latitude" value="#{addPumpControler.latitude}" required="true"/>
                        </pm:field>
                        <pm:field>
                            <p:outputLabel for="longitude" value="Longitude" />
                            <p:inputText id="longitude" value="#{addPumpControler.longitude}" required="true"/>
                        </pm:field>
                        <p:link href="http://www.latlong.net/" target="_blank" value="Pogledajte kordinate pumpe" style="float:right" />
                        <pm:field>
                            <p:outputLabel for="contact" value="Kontakt" />
                            <p:inputText id="contact" value="#{addPumpControler.contact}" />
                        </pm:field>
                        <pm:field>
                            <p:outputLabel for="working_time" value="Radno vrijeme" />
                            <p:inputText id="working_time" value="#{addPumpControler.workingTime}" />
                        </pm:field>

				         <pm:field>
	       					<p:commandButton value="Spremi" icon="ui-icon-check" process="@all" update="@all" ajax="false"  actionListener="#{addPumpControler.insertPump()}"/>
	       				</pm:field>
	            </div>
            </pm:content>
            <p:overlayPanel for="btn-meni" widgetVar="pnl-meni" at="left" showEffect="overlay">
	            	<h:outputLink value="userProfile.xhtml"><h:outputText value="#{userSession.user.firstName} #{userSession.user.lastName}" /></h:outputLink>
				<div style="clear:both" />
				<br/>
			     <p:menu>
                    <p:menuitem value="Pretraga" icon="ui-icon-search" url="search.xhtml" iconPos="left"/>
			        <p:menuitem value="Logout" icon="ui-icon-power" action="#{userSession.logout()}" process="@this" immediate="true" iconPos="left"/>
			     </p:menu>
			 </p:overlayPanel>
            <p:overlayPanel for="btn-basic" widgetVar="pnl-basic" at="right" showEffect="overlay">
			     <p:menu>
					<p:menuitem value="Dodaj / Ukloni Korisnika" icon="ui-icon-plus"
						url="addUser.xhtml" iconPos="left" />
						<p:menuitem value="Dodaj Pumpu" icon="ui-icon-plus" url="addPump.xhtml" iconPos="left"/>
				</p:menu>
				
			 </p:overlayPanel>
            
        </pm:page>
      </h:form>
    </h:body>
    
</html>